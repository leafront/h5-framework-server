!function(){"use strict";var s={ticking:!1,timer:null,complete:!1,position:{top:0,right:0,bottom:0,left:0},list:[],init:function(t){this.list.push(t),this.scrollLoad()},scrollLoad:function(){var i=this;!this.list.length&&this.complete?this.removeLazyLoad():(this.ticking=!1,this.list.forEach(function(t){"success"!=t.dataset.LazyLoadImgState&&i.getClientRect(t,i.position)&&i.loadImg(t)}))},scrollImg:function(){this.ticking||(this.ticking=!0,this.timer=window.requestAnimationFrame(this.scrollLoad.bind(this)))},getClientRect:function(t,i){var e=t.getBoundingClientRect(),s=t.offsetWidth,o=t.offsetHeight,n=window.innerWidth,a=window.innerHeight,r=!(e.right-i.left<=0&&e.left+s-i.left<=0||e.left+i.right>=n&&e.right+i.right>=s+n),c=!(e.bottom-i.top<=0&&e.top+o-i.top<=0||e.top+i.bottom>=a&&e.bottom+i.bottom>=o+a);return 0!=t.width&&0!=t.height&&r&&c},loadImg:function(e){var s=this,t=e.dataset.src;if(e.dataset.LazyLoadImgState="start",t){var i=new Image;i.src=t,i.addEventListener("load",function(){setTimeout(function(){e.style.backgroundImage="url("+t+")",e.style.backgroundSize="100% auto",delete e.dataset.src,e.dataset.LazyLoadImgState="success",e.classList.add("ui-successImg"),s.list.forEach(function(t,i){t==e&&s.list.splice(i,1)}),s.list.length||(s.complete=!0)},310)},!1),i.addEventListener("error",function(){delete e.dataset.src,e.dataset.LazyLoadImgState="error"},!1)}else delete e.dataset.src},start:function(){window.addEventListener("scroll",this.scrollImg.bind(this),!utils.isPassive()||{passive:!0,capture:!0})},removeLazyLoad:function(){cancelAnimationFrame(this.timer),window.removeEventListener("scroll",this.scrollImg.bind(this),!utils.isPassive()||{passive:!0,capture:!0})}};s.start(),Vue.directive("lazy",{inserted:function(t,i,e){s.init(t,i,e)}})}();
