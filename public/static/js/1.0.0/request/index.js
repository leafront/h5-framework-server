!function(){"use strict";window.request=function(e,t){var a=t.type,o=t.timeout,i=t.dataType,n=void 0===i?"json":i,r=t.data,s=void 0===r?{}:r,c=t.cache,l=void 0!==c&&c,u=t.expires,d=void 0===u?3e5:u,p=t.headers,m=t.hostPath,y=(t.ignoreLogin,{type:a,data:s,async:!0,url:e,timeout:o,dataType:n,headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},hostPath:m});"GET"==a&&(y.data.times=(new Date).getTime());var v=s;p&&"application/json"==p["Content-Type"]?(y.headers["Content-Type"]=p["Content-Type"],y.data=JSON.stringify(y.data)):(y.data=utils.queryStringify(y.data),v=utils.queryStringify(v));var g=e;function f(a){ajax(y).then(function(e){var t={times:(new Date).getTime()+d,results:e};e&&l&&store.set(g,t,"local"),a(e)})}return"GET"==a&&"json"==n&&(y.url=y.data?e+"?"+y.data:e,g=v?e+"?"+v:e),new Promise(function(e,t){var a=(new Date).getTime(),o=store.get(g,"local");(function(){var a=(new Date).getTime(),e=localStorage;utils.isLocalStorageSupported()||(e=window.name),e&&Object.keys(e).forEach(function(e){var t=store.get(e,"local");t&&t.times&&a>t.times&&store.remove(e,"local")})}(),l&&o)?a<o.times?e(o.results):(store.remove(g,"local"),f(e)):(store.remove(g,"local"),f(e))})}}();
